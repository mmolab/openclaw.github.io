---
import BaseLayout from './BaseLayout.astro';
import Header from '@/components/layout/Header.astro';
import Footer from '@/components/layout/Footer.astro';

const { title, description, lang = 'en' } = Astro.props;

// XÃ¢y dá»±ng Nav linh hoáº¡t theo ngÃ´n ngá»¯
const nav = [
  { label: lang === 'en' ? 'Articles' : 'BÃ i viáº¿t', href: `/${lang}/blog` },
  { label: lang === 'en' ? 'About' : 'Giá»›i thiá»‡u', href: `/${lang}/about` },
  { label: lang === 'en' ? 'Contact' : 'LiÃªn há»‡', href: `/${lang}/contact` },
];

// Logic chuyá»ƒn Ä‘á»•i ngÃ´n ngá»¯ cho URL hiá»‡n táº¡i
const currentPath = Astro.url.pathname;
const targetLang = lang === 'en' ? 'vi' : 'en';
const switchHref = currentPath.replace(`/${lang}`, `/${targetLang}`) || `/${targetLang}/`;
---

<BaseLayout title={title} description={description}>
  <Header
    slot="header"
    position="fixed"
    size="md"
    nav={nav}
    showCta={false}
    actions={[
      {
        icon: 'globe',
        href: switchHref,
        label: lang === 'en' ? 'Tiáº¿ng Viá»‡t ðŸ‡»ðŸ‡³' : 'English ðŸ‡ºðŸ‡¸',
        iconOnly: false,
      },
    ]}
  />

  <main>
    <slot />
  </main>

  <Footer slot="footer" layout="simple" background="secondary" showCopyright={true} />
</BaseLayout>
