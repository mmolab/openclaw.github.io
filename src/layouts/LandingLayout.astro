---
import BaseLayout from './BaseLayout.astro';
import Header from '@/components/layout/Header.astro';
import Footer from '@/components/layout/Footer.astro';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  imageAlt?: string;
  noindex?: boolean;
  nofollow?: boolean;
  includeOrgSchema?: boolean;
}

const {
  title,
  description,
  image,
  imageAlt,
  noindex = false,
  nofollow = false,
  includeOrgSchema = false,
} = Astro.props;

// Láº¥y ngÃ´n ngá»¯ hiá»‡n táº¡i tá»« URL query
const currentPath = Astro.url.pathname;
const searchParams = Astro.url.searchParams;
const lang = searchParams.get('lang') || 'en';
---

<BaseLayout
  title={title}
  description={description}
  image={image}
  imageAlt={imageAlt}
  noindex={noindex}
  nofollow={nofollow}
  includeOrgSchema={includeOrgSchema}
>
  <Header
    slot="header"
    position="fixed"
    size="md"
    showCta={false}
    actions={[
      {
        icon: 'globe',
        href: lang === 'en' ? '?lang=vi' : '?lang=en',
        label: lang === 'en' ? 'Tiáº¿ng Viá»‡t ðŸ‡»ðŸ‡³' : 'English ðŸ‡ºðŸ‡¸',
        iconOnly: false,
      },
    ]}
  />

  <main class="pt-24">
    <slot />
  </main>

  <Footer slot="footer" layout="simple" background="secondary" showCopyright={true} />
</BaseLayout>
