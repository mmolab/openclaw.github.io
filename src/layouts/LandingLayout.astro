---
import BaseLayout from './BaseLayout.astro';
import Header from '@/components/layout/Header.astro';
import Footer from '@/components/layout/Footer.astro';

const { title, description } = Astro.props;

// M·∫∑c ƒë·ªãnh Navigation Ti·∫øng Anh
const nav = [
  { label: 'Articles', href: '/blog' },
  { label: 'About', href: '/about' },
  { label: 'Contact', href: '/contact' },
];
---

<BaseLayout title={title} description={description}>
  <Header
    slot="header"
    position="fixed"
    size="md"
    nav={nav}
    showCta={false}
    actions={[
      {
        icon: 'globe',
        href: '#',
        label: 'Switch Language',
        iconOnly: false,
      },
    ]}
  />

  <main>
    <slot />
  </main>

  <Footer slot="footer" layout="simple" background="secondary" showCopyright={true} />
</BaseLayout>

<script>
  // Script x·ª≠ l√Ω chuy·ªÉn ƒë·ªïi ng√¥n ng·ªØ ph√≠a Client cho SSG
  function initLang() {
    const btn = document.querySelector('header a[href="#"]');
    if (!btn) return;

    let currentLang = localStorage.getItem('clawdaily_lang') || 'en';
    
    // C·∫≠p nh·∫≠t text n√∫t
    btn.textContent = currentLang === 'en' ? 'Ti·∫øng Vi·ªát üáªüá≥' : 'English üá∫üá∏';

    btn.addEventListener('click', (e) => {
      e.preventDefault();
      const newLang = currentLang === 'en' ? 'vi' : 'en';
      localStorage.setItem('clawdaily_lang', newLang);
      
      // Chuy·ªÉn h∆∞·ªõng k√®m theo tham s·ªë ƒë·ªÉ Astro l·ªçc d·ªØ li·ªáu (ho·∫∑c d√πng URL s·∫°ch)
      window.location.href = window.location.pathname + '?lang=' + newLang;
    });
  }

  initLang();
  document.addEventListener('astro:page-load', initLang);
</script>
